{% extends 'base.html' %}


{% block content %}
<p>это страница пользователя {{ user.username }}</p>

<div class="form-group">
<label>Аватарка</label>
    {% if user.image %}
        <img src="{{ user.image.url }}" alt="аватарка по каким-то причинам не загрузилась...">
    {% else %}
        <p> аватарки нет </p>
    {% endif %}

    <h3>Посты пользователя: </h3>
    {% for post in user.posts.all %}
        <a href="{% url 'post_detail' post.pk %}">
        <p>{{ post.title }}</p>
        </a>
    {% endfor %}

    <h3>Комментарии пользователя: </h3>
    {% for comment in user.comments.all %}
    <a href="{{ comment.post.get_absolute_url }}">
        <p>{{ comment.text }}</p>
        </a>
    {% endfor %}

    <h3>сумма всех МОИХ лайков к постам: {{ user.liked_posts.count }}</h3>
    <h3>сумма всех МОИХ лайков к комментариям: {{ user.liked_comments.count }}</h3>

    <h3> всего лайков за посты и комментарии {{ user.total_likes }}</h3>

    <h3> всего дизлайков за посты и комментарии {{ user.total_dislikes }}</h3>

    <h3>рейтинг юзера {{ user.username }}: {{ user.total_likes|add:user.total_dislikes }}</h3>



    <form method="POST" enctype="multipart/form-data" action="{% url 'save_image'  %}">
    {% csrf_token %}
    <input type="file" name="image">
        {{ form.image }}
    <button type="submit">Загрузить аватарку</button>
    </form>

</div>


{% endblock %}