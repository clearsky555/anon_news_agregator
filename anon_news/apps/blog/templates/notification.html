{% extends 'base.html' %}

{% block content %}
    <p>hello, {{ user.username }}</p>
    <p>Количество новых уведомлений:  {{ unread_count }}</p>

    <form method="post" action="{% url 'mark_notifications_as_read' %}">
        {% csrf_token %}
        <button type="submit">Прочитано</button>
    </form>

{% for notification in notifications %}
    <div>
        {% if notification.comment.author is not None %}
            <p>{{ notification.comment.author.username }} оставил(а) новый комментарий в посте "{{ notification.post.title }}"</p>
        {% else %}
            <p>аноним оставил(а) новый комментарий в посте "{{ notification.post.title }}"</p>
        {% endif %}
        <p>{{ notification.comment.text }}</p>

        <p>{{ notification.liker.username }} поставил лайк вашему посту "{{ notification.liked_post.title }}"</p>
        <p>{{ notification.disliker.username }} поставил дизлайк вашему посту "{{ notification.liked_post.title }}"</p>

        <p>{{ notification.liker.username }} поставил(а) лайк вашему комментарию "{{ notification.comment.text }}"</p>

        <p>{{ notification.disliker.username }} поставил(а) дизлайк вашему комментарию "{{ notification.comment.text }}"</p>

        {% if notification.reply_to_comment is not None %}
            <p>{{ notification.reply_to_comment.author.username }} ответил(а) на ваш комментарий "{{ notification.reply_to_comment.text }}"</p>
        {% endif %}


    </div>
{% endfor %}

{% endblock %}